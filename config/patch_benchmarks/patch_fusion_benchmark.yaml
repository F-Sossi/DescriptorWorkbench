# HPatches Patch Fusion Benchmark Configuration
#
# This configuration evaluates descriptor fusion strategies on pre-extracted
# HPatches patches, isolating the fusion effect from keypoint location quality.
#
# Run: ./patch_benchmark ../config/patch_benchmarks/patch_fusion_benchmark.yaml
# Or:  ./patch_benchmark --patches ../hpatches-release --descriptor hardnet

experiment:
  name: "patch_fusion_benchmark"
  description: "Compare descriptor fusion on pre-extracted HPatches patches"

# HPatches patch dataset location
patches:
  path: "../hpatches-release-rebuilt-color/"
  scenes: []  # Empty = all 116 scenes
  color: true
  difficulty:
    easy: true    # ~0.85 overlap (low geometric noise)
    hard: true    # ~0.72 overlap (high geometric noise)
    tough: true   # Additional difficulty level

# Descriptors to evaluate (baselines only)
# This section is used by patch_benchmark when run with this YAML.
descriptors:
  # Single CNN descriptors
#  - name: "hardnet"
#    type: "libtorch_hardnet"
#    device: "auto"
#    use_color: false
#
#  - name: "sosnet"
#    type: "libtorch_sosnet"
#    device: "auto"
#    use_color: false
#
#   # Single traditional descriptors
#  - name: "sift"
#    type: "sift"
#    use_color: false
#
#  - name: "rgbsift"
#    type: "rgbsift"
#    use_color: true
#
#  - name: "rgbsift_channel_avg"
#    type: "rgbsift_channel_avg"
#    use_color: true
#
#  - name: "honc"
#    type: "honc"
#    use_color: true

  - name: "dspsift_v2_post_scale_ch"
    type: "dspsift_v2"
    use_color: false
    pooling_aggregation: "max"
    normalize_after_pooling: true
    norm_type: "l2"
    scales: [0.85, 1.075, 1.30]

#  - name: "surf"
#    type: "surf"
#    use_color: false

# Performance settings
performance:
  num_threads: 12
  verbose: true

# Output settings
output:
  save_to_database: true  # Save results to SQLite (experiments + patch_benchmark_results)
  print_results: true
