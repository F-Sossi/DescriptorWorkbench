schema_version: 1

experiment:
  name: "composite_sift_rgbsift_sift2000"
  description: |
    Composite study pairing standard SIFT with both RGBSIFT variants (384D full color
    and 128D channel-average) across every available fusion mode. Uses the sift_2000
    keypoint set so the results align with prior composite experiments.

dataset:
  type: "hpatches"
  path: "../data/"
  scenes: []  # All scenes

keypoints:
  generator: "sift"
  source: "database"
  keypoint_set_name: "sift_2000"
  use_locked_keypoints: true

descriptors:
  # Baseline descriptors ------------------------------------------------------
  - name: "baseline_sift"
    type: "sift"
    pooling: "none"

  - name: "baseline_rgbsift_384"
    type: "rgbsift"
    pooling: "none"
    use_color: true

  - name: "baseline_rgbsift_128"
    type: "rgbsift_channel_avg"
    pooling: "none"
    use_color: true

  # --------------------------------------------------------------------------
  # Pairwise fusion: SIFT + RGBSIFT (128D channel-averaged)
  # --------------------------------------------------------------------------
  - name: "sift_rgbsift128_average"
    type: "composite"
    components:
      - descriptor: "sift"
      - descriptor: "rgbsift_channel_avg"
        use_color: true
    aggregation: "average"

  - name: "sift_rgbsift128_weighted_50_50"
    type: "composite"
    components:
      - descriptor: "sift"
        weight: 0.5
      - descriptor: "rgbsift_channel_avg"
        weight: 0.5
        use_color: true
    aggregation: "weighted_avg"

  - name: "sift_rgbsift128_max"
    type: "composite"
    components:
      - descriptor: "sift"
      - descriptor: "rgbsift_channel_avg"
        use_color: true
    aggregation: "max"

  - name: "sift_rgbsift128_min"
    type: "composite"
    components:
      - descriptor: "sift"
      - descriptor: "rgbsift_channel_avg"
        use_color: true
    aggregation: "min"

  - name: "sift_rgbsift128_concat"
    type: "composite"
    components:
      - descriptor: "sift"
      - descriptor: "rgbsift_channel_avg"
        use_color: true
    aggregation: "concatenate"

  # --------------------------------------------------------------------------
  # Pairwise fusion: SIFT + RGBSIFT (384D full color)
  # --------------------------------------------------------------------------
  - name: "sift_rgbsift_channelwise_128d"
    type: "composite"
    components:
      - descriptor: "sift"
      - descriptor: "rgbsift"
        use_color: true
    aggregation: "channel_wise"
    output_dimension: "128"

  - name: "sift_rgbsift_channelwise_384d"
    type: "composite"
    components:
      - descriptor: "sift"
      - descriptor: "rgbsift"
        use_color: true
    aggregation: "channel_wise"
    output_dimension: "384"

  - name: "sift_rgbsift384_concat"
    type: "composite"
    components:
      - descriptor: "sift"
      - descriptor: "rgbsift"
        use_color: true
    aggregation: "concatenate"

evaluation:
  matching:
    method: "brute_force"
    norm: "l2"
    cross_check: true

  keypoint_verification:
    enabled: true
    num_distractor_scenes: 10
    num_distractors_per_scene: 20
    seed: 42

  keypoint_retrieval:
    enabled: true
    num_distractor_scenes: 1
    num_distractors_per_scene: 10
    seed: 42

performance:
  parallel_scenes: true
  num_threads: 0  # Auto-detect

database:
  save_descriptors: false
  save_matches: false
  save_visualizations: false
